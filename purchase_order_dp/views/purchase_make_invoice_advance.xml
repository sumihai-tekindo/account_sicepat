<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<record id="view_purchase_advance_payment_inv" model="ir.ui.view">
			<field name="name">Invoice</field>
			<field name="model">purchase.advance.payment.inv</field>
			<field name="arch" type="xml">
				<form string="Invoice purchase Order">
					<p class="oe_grey">
						Select how you want to invoice this order. This
						will create a draft invoice that can be modified
						before validation.
					</p> 
					<group> 
						<field name="advance_payment_method" class="oe_inline"/>
						<field name="qtty" invisible="1"/>
						<field name="product_id" context="{'search_default_services': 1}" attrs="{'invisible': [('advance_payment_method','!=','fixed')],'required':[('advance_payment_method','=','fixed')]}"/>
						<label for="amount" attrs="{'invisible': [('advance_payment_method','=','all')]}" />
						<div attrs="{'invisible': [('advance_payment_method','=','all')]}">
							<field name="amount"  class="oe_inline" attrs="{'invisible': [('advance_payment_method','=','all')],'required':[('advance_payment_method','=','fixed')]}"/>
							<field name="amount_residual"  widget="monetary" on_change="_onchange_residual()" attrs="{'invisible': [('advance_payment_method','=','all')],'readonly':[('amount','=',0.0)]}"/>
						</div>
					</group>
					<footer>
						<button name="create_invoices" string="Create Invoice" type="object"
							class="oe_highlight"/>
						<button name="create_invoices" string="Show Lines to Invoice" type="object"
							class="oe_highlight"
							attrs="{'invisible': [('advance_payment_method', '!=', 'lines')]}"/>
						or
						<button string="Cancel" class="oe_link" special="cancel"/>
					</footer>
				</form>
			</field>
		</record>
		<record id="action_view_purchase_payment_inv" model="ir.actions.act_window">
			<field name="name">Invoice Order</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">purchase.advance.payment.inv</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="target">new</field>
		</record>
	</data>
</openerp>
